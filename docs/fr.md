# Documentation

---
---

- [Tutoriels](#tutoriels)
- [Guides](#guides)
- [Références](#références)
- [Explications](#explications)

---
---

{#tutoriels}
## *Tutoriels*

---
---

### Catégorie

---

#### Ajouter une catégorie

- Aller sur le menu `%%action.add.category%%`
- Saisir une valeur dans le champ `%%field.name%%`
- Appuyer sur `%%eab.action.create%%`
- Un [flash message](#flash-message) confirmera la création et vous serez redirigé vers la page de listing des catégories

#### Modifier une catégorie

- Aller sur le menu `%%index.categories%%`
- Si nécessaire, rechercher votre catégorie (cf **Tutoriels > Rechercher une catégorie**)
- Sur la ligne de la catégorie à modifier, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.edit%%`
- Saisir une nouvelle valeur dans le champ `%%field.name%%`
- Appuyer sur `%%eab.action.save%%`
- Un [flash message](#flash-message) confirmera la modification et vous serez redirigé vers la page de listing des catégories

#### Rechercher une catégorie

- Aller sur le menu `%%index.categories%%`
- Appuyer sur le bouton `%%eab.filter.title%%`
- Sélectionner le champ `%%field.name%%` puis sélectionner le filtre désiré ainsi que la valeur à rechercher
- Appuyer sur `%%eab.filter.button.apply%%`
- Vous serez sur la page de listing des catégories mise à jour suivant le filtre appliqué

#### Supprimer une catégorie

- Aller sur le menu `%%index.categories%%`
- Si nécessaire, rechercher votre catégorie (cf Tutoriels > Rechercher une catégorie)
- Sur la ligne de la catégorie à supprimer, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.delete%%`
- Appuyer sur le bouton `%%eab.action.delete%%`
- Un [flash message](#flash-message) confirmera la suppression et vous serez sur la page de listing des catégories mise à jour

#### Voir les détails d'une catégorie

- Aller sur le menu `%%index.categories%%`
- Si nécessaire, rechercher votre catégorie (cf **Tutoriels > Rechercher une catégorie**)
- Sur la ligne de la catégorie en question, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.detail%%`
- Vous serez redirigé vers la page détaillée de la catégorie

---

### Destinataire

---

#### Ajouter un destinataire

- Aller sur le menu `%%action.add.recipient%%`
- Saisir une valeur dans les champs `%%field.name%%` et `%%field.short%%`
- Appuyer sur `%%eab.action.create%%`
- Un [flash message](#flash-message) confirmera la création et vous serez redirigé vers la page de listing des destinataires

#### Modifier un destinataire

- Aller sur le menu `%%index.recipients%%`
- Si nécessaire, rechercher votre destinataire (cf **Tutoriels > Rechercher un destinataire**)
- Sur la ligne du destinataire à modifier, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.edit%%`
- Saisir une nouvelle valeur dans les champs `%%field.name%%` et / ou `%%field.short%%`
- Appuyer sur `%%eab.action.save%%`
- Un [flash message](#flash-message) confirmera la modification et vous serez redirigé vers la page de listing des destinataires

#### Rechercher un destinataire

- Aller sur le menu `%%index.recipients%%`
- Appuyer sur le bouton `%%eab.filter.title%%`
- Sélectionner les champs `%%field.name%%` et / ou `%%field.short%%` puis sélectionner leurs filtres désirés ainsi que la / les valeur(s) à rechercher
- Appuyer sur `%%eab.filter.button.apply%%`
- Vous serez sur la page de listing des destinataires mise à jour suivant le(s) filtre(s) appliqué(s)

#### Supprimer un destinataire

- Aller sur le menu `%%index.recipients%%`
- Si nécessaire, rechercher votre destinataire (cf Tutoriels > Rechercher une destinataire)
- Sur la ligne du destinataire à supprimer, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.delete%%`
- Appuyer sur le bouton `%%eab.action.delete%%`
- Un [flash message](#flash-message) confirmera la suppression et vous serez sur la page de listing des destinataires mise à jour

#### Voir les détails d'un destinataire

- Aller sur le menu `%%index.recipients%%`
- Si nécessaire, rechercher votre destinataire (cf **Tutoriels > Rechercher une destinataire**)
- Sur la ligne du destinataire en question, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.detail%%`
- Vous serez redirigé vers la page détaillée du destinataire

---

### Image

---

#### Ajouter une image

Une image ne peut pas être ajoutée, elle se fait importer.

Se référer au guide d'[import d'une image](#image-import) (cf **Guides > Import d'une image**)

#### Modifier une image

- Aller sur le menu `%%index.images%%`
- Si nécessaire, rechercher votre image (cf **Tutoriels > Rechercher une image**)
- Sur la ligne de l'image à modifier, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.edit%%`
- Saisir le(s) destinataire(s) de l'image
- Appuyer sur `%%eab.action.save%%`
- Un [flash message](#flash-message) confirmera la modification et vous serez redirigé vers la page de listing des images

#### Rechercher une image

- Aller sur le menu `%%index.images%%`
- Appuyer sur le bouton `%%eab.filter.title%%`
- Sélectionner les champs `%%field.filename%%` et / ou `%%field.recipients%%` puis sélectionner leurs filtres désirés ainsi que la / les valeur(s) à rechercher
- Appuyer sur `%%eab.filter.button.apply%%`
- Vous serez sur la page de listing des images mise à jour suivant le(s) filtre(s) appliqué(s)

#### Supprimer une image

- Aller sur le menu `%%index.images%%`
- Si nécessaire, rechercher votre image (cf Tutoriels > Rechercher une image)
- Sur la ligne de l'image à supprimer, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.delete%%`
- Appuyer sur le bouton `%%eab.action.delete%%`
- Un [flash message](#flash-message) confirmera la suppression et vous serez sur la page de listing des images mise à jour

#### Voir les détails d'une image

- Aller sur le menu `%%index.images%%`
- Si nécessaire, rechercher votre image (cf **Tutoriels > Rechercher une image**)
- Sur la ligne de l'image en question, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.detail%%`
- Vous serez redirigé vers la page détaillée de l'image

---

### Lien

---

#### Ajouter un lien

- Aller sur le menu `%%action.add.link%%`
- Saisir les champs contenant une étoile rouge (obligatoire) ainsi que, si désiré, les champs sans étoile rouge (facultatifs)
- Appuyer sur `%%eab.action.create%%`
- Un [flash message](#flash-message) confirmera la création et vous serez redirigé vers la page de listing des catégories

#### Modifier un lien

- Aller sur le menu `%%index.links%%`
- Si nécessaire, rechercher votre lien (cf **Tutoriels > Rechercher un lien**)
- Sur la ligne du lien à modifier, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.edit%%`
- Saisir les informations à modifier
- Appuyer sur `%%eab.action.save%%`
- Un [flash message](#flash-message) confirmera la modification et vous serez redirigé vers la page de listing des liens

#### Rechercher un lien

- Aller sur le menu `%%index.links%%`
- Appuyer sur `%%eab.filter.title%%`
- Sélectionner les différents champs (ainsi que les valeurs à rechercher) où un filtre sera appliqué
- Appuyer sur `%%eab.filter.button.apply%%`
- Vous serez sur la page de listing des liens mais avec une liste plus ou moins grande suivant vos filtres

#### Supprimer un lien

- Aller sur le menu `%%index.links%%`
- Si nécessaire, rechercher votre lien (cf Tutoriels > Rechercher un lien)
- Sur la ligne du lien à supprimer, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.delete%%`
- Appuyer sur le bouton `%%eab.action.delete%%`
- Un [flash message](#flash-message) confirmera la suppression et vous serez sur la page de listing des liens mise à jour

#### Voir les détails d'un lien

- Aller sur le menu `%%index.links%%`
- Si nécessaire, rechercher votre lien (cf **Tutoriels > Rechercher un lien**)
- Sur la ligne du lien en question, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.detail%%`
- Vous serez redirigé vers la page détaillée du lien

---

### Tag

---

#### Ajouter un tag

- Aller sur le menu `%%action.add.tag%%`
- Saisir une valeur dans le champ `%%field.name%%`
- Appuyer sur `%%eab.action.create%%`
- Un [flash message](#flash-message) confirmera la création et vous serez redirigé vers la page de listing des tags

#### Modifier un tag

- Aller sur le menu `%%index.tags%%`
- Si nécessaire, rechercher votre tag (cf **Tutoriels > Rechercher un tag**)
- Sur la ligne du tag à modifier, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.edit%%`
- Saisir une nouvelle valeur dans le champ `%%field.name%%`
- Appuyer sur `%%eab.action.save%%`
- Un [flash message](#flash-message) confirmera la modification et vous serez redirigé vers la page de listing des tags

#### Rechercher un tag

- Aller sur le menu `%%index.tags%%`
- Appuyer sur `%%eab.filter.title%%`
- Sélectionner le filtre sur `%%field.name%%` et saisir la valeur à rechercher
- Appuyer sur `%%eab.filter.button.apply%%`
- Vous serez sur la page de listing des tags mais avec une liste plus ou moins grande suivant votre filtre

#### Supprimer un tag

- Aller sur le menu `%%index.tags%%`
- Si nécessaire, rechercher votre tag (cf Tutoriels > Rechercher un tag)
- Sur la ligne du tag à supprimer, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.delete%%`
- Appuyer sur le bouton `%%eab.action.delete%%`
- Un [flash message](#flash-message) confirmera la suppression et vous serez sur la page de listing des tags mise à jour

#### Voir les détails d'un tag

- Aller sur le menu `%%index.tags%%`
- Si nécessaire, rechercher votre tag (cf **Tutoriels > Rechercher un tag**)
- Sur la ligne du tag en question, appuyer sur le bouton en forme de 3 points (...)
- Sélectionner le sous-menu `%%eab.action.detail%%`
- Vous serez redirigé vers la page détaillée du tag

---
---

{#guides}
## *Guides*

---
---

{#image-import}
### Import d'une image

Au contraire de toutes les autres informations, une image a besoin de deux informations en même temps :
- une inscription dans la base de données (son nom de fichier ainsi que les destinataires qui la verront)
- le fichier image sur le disque

Ainsi, il n'existe pas de formulaire associé à l'ajout d'une image mais plutôt le menu `%%action.images_not_saved%%`
qui inscrira en base de données les images stockées sur le disque et non présentes dans celle-ci.

Pour ce faire, un scan du dossier `##images.folder.path##` est effectué et un différentiel est opéré
pour savoir quelles sont les nouvelles images physiquement présentes mais non sauvegardées en base de données.

Si tous les fichiers d'images sont stockées en base de données, le menu affichera un `0` en vert
sinon le nombre d'images pouvant être importées sera inscrit en rouge.

Il ne restera qu'à cliquer sur ce menu et de confirmer l'import en base des images.

---

### Suppressions des images utilisées par tous les destinataires

Lorsque vos destinataires ont eu une image en particulier dans leurs NLs, celle-ci n'a plus lieu d'être utilisée à
nouveau (c'est un choix propre pour éviter la répétition).

Ainsi, une détection est effectuée pour savoir quelles sont les images en question et le sous-menu
`%%index.images_used_by_everyone%%` affichera un `0` en vert sinon le nombre d'images pouvant être supprimées
sera inscrit en rouge.

Il ne restera qu'à cliquer sur ce menu et de confirmer la suppression en base (et physiquement) de ces images.

---

### Nom du fichier image

Pour éviter tout potentiel problème avec des noms de fichiers comportant des caractères spéciaux ou des espaces, le nom
du fichier peut devenir la valeur du md5 de la source.

Exemple : md5 -s https://www.jonglerieetjonglages.fr/en/images/antiquite/egypt_2000avJC_virtuosos_of_juggling_p3_lq.jpg

---

### Détails concernant cette documentation

- Pour apposer une ancre (html), placer {#ancre} à un endroit puis un accès [mon ancre](#ancre) à un autre.
- Pour placer une traduction venant d'EasyAdminBundle, placer `% %eab.{clé-de-traduction}% %` (sans espace)
- Pour placer une traduction venant de Netflinks, placer `% %{clé-de-traduction}% %` (sans espace)
- Pour placer un chemin relatif, il doit être spécifié dans la clé `$paths` du `DashboardController`, puis placer
`# #{clé-de-traduction}# #` (sans espace)

---

### Exemple de workflow complet de création d'une NL

- Créer un destinataire nommé `Jean` (et `JD` pour le nom court)
- Créer deux catégories nommées `Divers` et `Autres`
- Ajouter un lien avec https://www.perdu.com comme url et `Perdu` comme nom, dans la catégorie `Divers` pour `Jean`
- Ajouter un lien avec https://127.0.0.1:8000 comme url et `Netflinks` comme nom, dans la catégorie `Autres` pour `Jean`
- Copier deux fichiers image dans le dossier `##images.folder.path##` (nommés disons `test1.jpg` et `test2.jpg`)
- Actualiser la page (afin que le menu `%%index.images_used_by_everyone%%` n'affiche plus `0`)
- Cliquer sur `%%index.images_used_by_everyone%%` puis confirmer
- Ajouter une newsletter :
  - pour Jean
  - à date d'aujourd'hui
  - `Perdu` comme premier lien
  - `Netflinks` comme dernier lien
  - `test1.jpg` et `test2.jpg` comme images
  - `Autres` et `Divers` comme catégories
- Dans le sous-menu (les 3 petits points ...) de la NL pour `Jean`, sélectionner `%action.assign_images_to_recipient%`
- Dans le même sous-menu, sélectionner `%action.generate_pdf%`

Voilà, une NL constituée de deux liens dans deux catégories différentes où une image est affichée avant chacune.

---
---

{#références}
## *Références*

---
---

### Catégorie

Une catégorie représente un sous-ensemble contenant des liens de même famille.

Ex: Des liens provenant de youtube et dailymotion peuvent être rassemblés sous une catégorie "Vidéo".

### Destinataire

Un destinataire désignera une personne à qui un lien sera partagé.

### Image

Une image est ce qui est présenté en amont d'une catégorie dans la NL.

Il faudra s'assurer d'avoir au moins `{nombre de catégories}` image(s) importée(s) avant de générer une NL.

### Lien

Un lien représente une url avec une description et une catégorie qui peut être partagé à des destinataires.

En complément, ce lien peut :
- être marqué en tant que favori
- avoir des tags
- avoir une note additionnelle

### Tag

Au contraire d'une catégorie dont un lien ne peut n'en avoir qu'une, les tags permettant de lier un lien à plusieurs thématiques.

Un article qui parle de base de données pourra, par exemple, contenir les tags suivant :
- informatique
- base de données
- mysql (ou un autre SGBD)

---

{#flash-message}
### Flash message

Un flash message est un message (affiché tout en haut) qui informera du succès (couleur verte) ou de l'échec (couleur rouge) d'une action effectuée sur l'outil.

Ex: `Le contenu "Nouveau lien" a été créé avec succès.`

---
---

{#explications}
## *Explications*

---
---

### Comment chaque action effectuée arrive à avoir son propre flash message ?

Il faut regarder la classe `PostActionsSubscriber` pour cela.
